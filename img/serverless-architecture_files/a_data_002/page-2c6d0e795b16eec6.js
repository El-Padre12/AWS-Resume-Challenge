(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1931],{66624:function(e,t,n){Promise.resolve().then(n.bind(n,93779))},93779:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var r=n(27573),s=n(93558),o=n(7653),a=n(17796);function i(e){let{parentWindow:t,allowedOrigins:n,onOutsideRequest:r}=e,[s,i]=(0,o.useState)(null);(0,o.useEffect)(()=>{if(t){let e=new a.A({parentWindow:t,allowedOrigins:n,onOutsideRequest:r});return i(e),()=>{e.cleanup()}}},[t,n,r]);let l=(0,o.useCallback)(async(e,t)=>{if(s)return s.sendRequest(e,t);throw Error("Communicator not initialized")},[s]);return{sendRequest:null===s?void 0:l}}function l(e,t){switch(e.type){case"UnsupportedImports":return{title:t?t.formatMessage({defaultMessage:"Artifact failed to load",id:"NcDXiSfIPe"}):"Artifact failed to load",description:t?t.formatMessage({defaultMessage:"The generated artifact uses libraries we don’t support:",id:"HG0Hu8xIQA"}):"The generated artifact uses libraries we don’t support:",inset:[...e.unsupportedModules,...e.nonExistentIcons.map(e=>"{ ".concat(e,' } from "lucide-react"'))],subtext:t?t.formatMessage({defaultMessage:"The code itself may still work. To use it, you’ll need a development setup with these libraries installed.",id:"Et/uvuRBba"}):"The code itself may still work. To use it, you’ll need a development setup with these libraries installed."};case"RuntimeError":return{title:t?t.formatMessage({defaultMessage:"Error running artifact",id:"JU2kK1J3jY"}):"Error running artifact",description:t?t.formatMessage({defaultMessage:"An error occurred while trying to run the generated artifact.",id:"3RpkNRAyPc"}):"An error occurred while trying to run the generated artifact.",inset:[e.message],insetStyle:"danger"};case"FileNotFound":return{title:t?t.formatMessage({defaultMessage:"File not found",id:"gcaJtRf4b0"}):"File not found",description:t?t.formatMessage({defaultMessage:"The file “{fileName}” could not be found.",id:"0kOCGtB3eN"},{fileName:e.fileName}):"The file “".concat(e.fileName,"” could not be found."),subtext:t?t.formatMessage({defaultMessage:"Please check the file name and try again.",id:"/fdYJU5SMC"}):"Please check the file name and try again."};case"ClaudeCompletionError":return{title:t?t.formatMessage({defaultMessage:"Error in Claude completion",id:"ya5HK9oB9T"}):"Error in Claude completion",description:e.message}}}var c=n(82083),d=n(63379),u=n(91584),p=n(81695),m=n(85658);function g(e){let{enabled:t,children:n,sendRequest:a}=e,i=(0,o.useRef)(null);return((0,o.useLayoutEffect)(()=>{if(!i.current||!a||!t)return;let e=new ResizeObserver(e=>{let t=e[0].contentRect.height,n=e[0].contentRect.width;n&&t&&a(s.to.BroadcastContentSize,{"@type":"type.googleapis.com/anthropic.claude.usercontent.sandbox.BroadcastContentSizePayload",height:t,width:n})});return e.observe(i.current),()=>{e.disconnect()}},[a,t]),t)?(0,r.jsx)("div",{ref:i,children:n}):n}var f=n(21179),h=n(69958),w=n(16273),y=n(26798);let v=e=>{let{title:t,description:n,subtext:s,inset:o,cta:a,onClick:i,ctaDisabled:l,insetStyle:c="default"}=e,d=()=>o?Array.isArray(o)?(0,r.jsx)("ul",{children:o.map((e,t)=>(0,r.jsx)("li",{children:e},t))}):o:null;return(0,r.jsxs)(y.Card,{className:"border-gray-200 w-[460px] max-w-full shadow-lg bg-bg-000",children:[(0,r.jsxs)(y.CardHeader,{className:"flex-row items-center space-y-0",children:[(0,r.jsx)(h.Z,{className:"mr-2 h-5 w-5"}),(0,r.jsx)(y.CardTitle,{children:t})]}),(0,r.jsxs)(y.CardContent,{children:[(0,r.jsx)("p",{className:"mb-2 text-sm",children:n}),!!o&&(0,r.jsx)("div",{className:(0,f.Z)("flex flex-col rounded-md bg-gray-100 p-2 font-mono text-xs","danger"===c&&"text-destructive"),children:d()}),!!s&&(0,r.jsx)("p",{className:"text-text-500 mt-2 text-sm",children:s}),!!a&&(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(w.Button,{className:"mt-4",onClick:i,disabled:l,children:a})})]})]})};var b=n(93320),x=n(84814),E=n(14492),R=n(25828),C=n(26853),M=n(61470),A=n(86082),j=n(29885);let k=e=>(0,M.vs)(e,{transforms:["jsx","typescript","imports"],production:!0}).code.substring(13);function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4,n=(0,j.xv)(e),r=window.location.origin,o=n.map(e=>{var t;let n=new URL(null===(t=A.V[e])||void 0===t?void 0:t.path,r).href;return"importScripts('".concat(n,"');")}).join("\n");return new Promise(r=>{let a="\n      // For each library, import it.\n      ".concat(o,"\n\n      const dependencies = {\n        ").concat(n.map(e=>{var t;return"".concat(e,": ").concat(null===(t=A.V[e])||void 0===t?void 0:t.global)}).join(",\n  "),"\n      };\n\n      const mockRequire = (moduleName) => {\n        if (dependencies[moduleName]) {\n          return dependencies[moduleName];\n        }\n        throw new Error(`Module not found: '${moduleName}'`);\n      };\n\n      let pendingPromises = new Set();\n      let pendingTimers = new Set();\n\n      const originalPromise = Promise;\n      self.Promise = function (...args) {\n        const promise = new originalPromise(...args);\n        pendingPromises.add(promise);\n        promise.then(() => pendingPromises.delete(promise), () => pendingPromises.delete(promise));\n        return promise;\n      };\n\n      // Maintain static methods of Promise\n      Object.getOwnPropertyNames(originalPromise).forEach(prop => {\n        if (prop !== 'prototype' && typeof originalPromise[prop] === 'function') {\n          self.Promise[prop] = function(...args) {\n            const result = originalPromise[prop].apply(originalPromise, args);\n            if (result instanceof originalPromise) {\n              pendingPromises.add(result);\n              result.then(() => pendingPromises.delete(result), () => pendingPromises.delete(result));\n            }\n            return result;\n          };\n        }\n      });\n\n      const originalSetTimeout = self.setTimeout;\n      self.setTimeout = function (callback, delay, ...args) {\n        const timer = originalSetTimeout(() => {\n          pendingTimers.delete(timer);\n          callback(...args);\n        }, delay);\n        pendingTimers.add(timer);\n        return timer;\n      };\n\n      function waitForAsync() {\n        return new originalPromise(resolve => {\n          function check() {\n            if (pendingPromises.size === 0 && pendingTimers.size === 0) {\n              resolve();\n            } else {\n              originalSetTimeout(check, 0);\n            }\n          }\n          check();\n        });\n      }\n\n      const stringifyArg = (arg) => {\n        if (typeof arg === 'object' && arg !== null) {\n          try {\n            return JSON.stringify(arg);\n          } catch (error) {\n            return '[Unstringifiable Value]';\n          }\n        }\n        return String(arg);\n      };\n\n      const logs = [];\n      const originalConsole = console;\n      console = {\n        log: (...args) => {\n          const stringifiedArgs = args.map(stringifyArg);\n          logs.push(stringifiedArgs.join(' '));\n        },\n        warn: (...args) => {\n          const stringifiedArgs = args.map(stringifyArg);\n          logs.push('WARN: ' + stringifiedArgs.join(' '));\n        },\n        error: (...args) => {\n          const stringifiedArgs = args.map(stringifyArg);\n          logs.push('ERROR: ' + stringifiedArgs.join(' '));\n        }\n      };\n\n\n      // In case of multiple files, use a map\n      let requestId = 0;\n      const callbacksMap = new Map();\n      self.window = {\n        fs: {\n          readFile: async (filename, encoding) => {\n            return new Promise((resolve, reject) => {\n              const id = requestId++;\n              callbacksMap.set(id, { resolve, reject });\n              self.postMessage({ type: 'readFile', id, filename, encoding});\n            });\n          }\n        },\n        claude: {\n          complete: async (prompt) => {\n            return new Promise((resolve, reject) => {\n              const id = requestId++;\n              callbacksMap.set(id, { resolve, reject });\n              self.postMessage({ type: 'claudeComplete', id, prompt });\n            });\n          }\n        }\n      }\n\n      self.onmessage = async function(e) {\n        // Handle capability responses\n        if (e.data.type === 'fileContent') {\n          const callback = callbacksMap.get(e.data.id);\n          callback.resolve(e.data.content);\n          await waitForAsync();\n          callbacksMap.delete(e.data.id);\n          return;\n        } else if (e.data.type === 'fileError') {\n          const callback = callbacksMap.get(e.data.id);\n          callback.reject(new Error(e.data.error));\n          callbacksMap.delete(e.data.id);\n          return;\n        } else if (e.data.type === 'claudeComplete') {\n          const callback = callbacksMap.get(e.data.id);\n          if (e.data.error) {\n            callback.reject(new Error(e.data.error));\n          } else {\n            callback.resolve(e.data.completion);\n          }\n          callbacksMap.delete(e.data.id);\n          return;\n        }\n\n        // Handle code execution\n        const code = e.data;\n        const wrappedCode = `\n          return (async ({ require }) => {\n            ${code}\n          });\n        `;\n\n        try {\n          const fn = new Function(wrappedCode);\n          const result = await fn()({ require: mockRequire });\n          await waitForAsync();\n          self.postMessage({ status: 'success', result: JSON.stringify(result), logs });\n        } catch (error) {\n          self.postMessage({\n            status: 'error',\n            error: error instanceof Error ? error.message : String(error),\n            logs\n          });\n        }\n      };\n    "),i=new Worker(URL.createObjectURL(new Blob([a],{type:"application/javascript"}))),l=setTimeout(()=>{i.terminate(),r({status:"error",logs:[],error:"Execution timed out"})},t);i.onmessage=async e=>{var t,n,o,a,c;if((null===(t=e.data)||void 0===t?void 0:t.type)==="readFile")try{let t=await window.fs.readFile(null===(o=e.data)||void 0===o?void 0:o.filename,null===(a=e.data)||void 0===a?void 0:a.encoding);i.postMessage({type:"fileContent",content:t,id:null===(c=e.data)||void 0===c?void 0:c.id})}catch(e){r({status:"error",logs:[],error:e instanceof Error?e.message:String(e)}),i.terminate()}else if((null===(n=e.data)||void 0===n?void 0:n.type)==="claudeComplete")try{let t=await window.claude.complete(e.data.prompt);i.postMessage({type:"claudeComplete",completion:t,id:e.data.id})}catch(t){i.postMessage({type:"claudeComplete",error:t instanceof Error?t.message:String(t),id:e.data.id})}else{clearTimeout(l),i.terminate();let t=s.vr.safeParse(e.data);t.success?r(t.data):r({status:"error",logs:[],error:"Invalid execution result: "+t.error.message})}},i.postMessage(k(e))})}let q=e=>{let{sendRequest:t,handleError:n}=e;(0,o.useEffect)(()=>{let e=void 0===t?async(e,t)=>Promise.resolve(null):async(e,r)=>{try{let n=await t(s.to.GetFile,{"@type":"type.googleapis.com/anthropic.claude.usercontent.sandbox.GetFileRequest",key:e});if("type.googleapis.com/anthropic.claude.usercontent.sandbox.GetFileResponse"!==n["@type"])throw Error("Unexpected response type");let o=n.value;if(null===o)throw Error('File not found: No file named "'.concat(e,'"'));let a=(null==r?void 0:r.encoding)||null;if("utf8"===a||"utf-8"===a||"utf_8"===a)return new TextDecoder("utf-8").decode(o);if("binary"===a||null===a)return o;throw Error("Unsupported encoding: ".concat(a))}catch(t){throw t instanceof Error?t.message.startsWith("File not found:")?n({type:"FileNotFound",fileName:e}):n({type:"RuntimeError",message:t.message}):n({type:"RuntimeError",message:String(t)}),t}},r=(e,t)=>{throw Error("Synchronous file operations are not supported in this environment. Please use readFile instead.")},o=void 0===t?async e=>Promise.resolve(""):async e=>{try{var r;let n=await t(s.to.ClaudeCompletion,{"@type":"type.googleapis.com/anthropic.claude.usercontent.sandbox.ClaudeCompletionRequest",prompt:e});if("type.googleapis.com/anthropic.claude.usercontent.sandbox.ClaudeCompletionResponse"!==n["@type"])throw Error("Unexpected response type");return null!==(r=n.completion)&&void 0!==r?r:""}catch(e){return n({type:"ClaudeCompletionError",message:e instanceof Error?e.message:String(e)}),""}},a=e=>{null==t||t(s.to.SendConversationMessage,{messageType:"text",message:e,"@type":"type.googleapis.com/anthropic.claude.usercontent.sandbox.SendConversationMessageRequest"})},i=e=>{null==t||t(s.to.OpenExternal,{href:e,"@type":"type.googleapis.com/anthropic.claude.usercontent.sandbox.OpenExternal"})};window.fs={readFile:e,readFileSync:r},window.claude={complete:o,sendConversationMessage:a,openExternal:i},window.open=e=>(e&&i(e.toString()),null)},[t,n])};function P(){try{return window.self!==window.top}catch(e){return!0}}function T(){let{defaultParentOrigin:e}=(0,m.E)();return(0,o.useCallback)(()=>{if(window.top)try{window.top.location.href="//".concat(e);return}catch(e){}window.location.href="//".concat(e)},[e])}function N(e){let{error:t}=e,n=l(t);return(0,r.jsx)("div",{className:"flex min-h-full w-full items-center justify-center bg-gray-100 p-4",children:(0,r.jsx)(v,{title:n.title,description:n.description,inset:n.inset,subtext:n.subtext,insetStyle:n.insetStyle})})}function I(){let{allowedParents:e}=(0,m.E)(),t=T(),[n,a]=(0,o.useState)(""),[l,f]=(0,o.useState)(),[h,w]=(0,o.useState)(!1),[y,M]=(0,o.useState)(null),[A,j]=(0,o.useState)(!1),k=(0,o.useRef)(null),I=(0,o.useRef)(null),L=(0,o.useRef)(null),F=(0,o.useMemo)(()=>e.map(e=>"".concat(e.scheme,"://").concat(e.origin)),[e]),O=(0,o.useCallback)(()=>{k.current&&(clearTimeout(k.current),k.current=null),j(!1)},[]),D=(0,o.useCallback)(e=>{L.current&&(L.current(e),L.current=null)},[]),U=()=>Array.from(document.querySelectorAll(".research-report-content")).map(e=>e.outerHTML).join(""),B=(0,o.useCallback)(async e=>{var t,n,r;let{method:o,payload:i}=e;if(O(),o===s.to.SetContent){M(null),a(i.content),f(i.type),w(null!==(t=i.watchContentSize)&&void 0!==t&&t);return}if(o===s.to.RunCode)try{let e=await S(i.code);return{"@type":"type.googleapis.com/anthropic.claude.usercontent.sandbox.RunCodeResponse",...e}}catch(e){return{"@type":"type.googleapis.com/anthropic.claude.usercontent.sandbox.RunCodeResponse",status:"error",logs:[],error:"Unexpected error executing code: "+(e instanceof Error?e.message:String(e))}}else if(o===s.to.GetScreenshot){if(l===c.JP.Html){let e=new Promise(e=>{L.current=e});null===(r=I.current)||void 0===r||null===(n=r.contentWindow)||void 0===n||n.postMessage({type:"takeScreenshot"},"*");let t=await e;return{"@type":"type.googleapis.com/anthropic.claude.usercontent.sandbox.GetScreenshotResponse",screenshot:t.success?t.screenshot:null}}let e=document.getElementById("artifacts-component-root-svg")||document.getElementById("artifacts-component-root-react")||document.getElementById("mermaid");return e?{"@type":"type.googleapis.com/anthropic.claude.usercontent.sandbox.GetScreenshotResponse",screenshot:await (0,d.YM)(e,{imagePlaceholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAA1JREFUGFdjePDgwX8ACOQDoNsk0PMAAAAASUVORK5CYII="})}:{"@type":"type.googleapis.com/anthropic.claude.usercontent.sandbox.GetScreenshotResponse",screenshot:null}}else if(o===s.to.CopyHtmlContent)return{"@type":"type.googleapis.com/anthropic.claude.usercontent.sandbox.CopyHtmlContentResponse",reportHTMLContent:U()}},[O,l]),{sendRequest:z}=i({parentWindow:window.parent,allowedOrigins:F,onOutsideRequest:B}),H="parent"===(0,p.useSearchParams)().get("errorReportingMode")?"parent":"sandbox",W=(0,o.useCallback)(e=>{"parent"===H&&e?null==z||z(s.to.ReportError,{"@type":"type.googleapis.com/anthropic.claude.usercontent.sandbox.ReportErrorRequest",error:e}):M(e)},[H,z]);q({sendRequest:z,handleError:W}),(0,o.useEffect)(()=>{P()||t()},[t]),(0,o.useEffect)(()=>{if(!z)return;let e=!0,t=0,n=20;return async function(){for(;e&&t<n;)try{let t=await Promise.race([null==z?void 0:z(s.to.ReadyForContent,{"@type":"type.googleapis.com/google.protobuf.Empty"}),new Promise((e,t)=>setTimeout(()=>t(Error("Timeout")),200))]);return e=!1,t}catch(e){++t>=n&&console.warn("Max retries reached while trying to send ready message"),await new Promise(e=>setTimeout(e,500))}}(),()=>{e=!1}},[z]),(0,o.useEffect)(()=>(O(),k.current=setTimeout(()=>{j(!0)},3e3),()=>{k.current&&clearTimeout(k.current)}),[n,l,O]);let _=(0,o.useCallback)(t=>{var n;if(!e.some(e=>t.origin==="".concat(e.scheme,"://").concat(e.origin))||!t.data.type)return;O();let{type:r,content:s,watchContentSize:o}=t.data;f(r),a(s),w(null!=o&&o),null===(n=t.source)||void 0===n||n.postMessage({type:"MESSAGE_RECEIVED",requestId:t.data.requestId},{targetOrigin:t.origin})},[e,O]);return((0,o.useEffect)(()=>(window.addEventListener("message",_),window.parent&&e.forEach(e=>{window.parent.postMessage({type:"USER_CONTENT_RENDERER_READY"},"".concat(e.scheme,"://").concat(e.origin))}),()=>window.removeEventListener("message",_)),[_,e]),(0,o.useEffect)(()=>{if(!z)return;let e=e=>{let t;if(!(e.target instanceof HTMLElement))return;let n=e.target.closest("a");if(n&&n.href){e.preventDefault(),e.stopImmediatePropagation();try{t=new URL(n.href)}catch(e){return}t.hostname!==window.location.hostname&&(null==z||z(s.to.OpenExternal,{"@type":"type.googleapis.com/anthropic.claude.usercontent.sandbox.OpenExternal",href:n.href}))}};return document.addEventListener("click",e,!1),()=>window.removeEventListener("click",e)},[z]),y&&"sandbox"===H)?(0,r.jsx)(N,{error:y}):(0,r.jsx)(u.ErrorBoundary,{errorComponent:e=>{let{error:t}=e;return W({type:"RuntimeError",message:t.message}),null},children:(0,r.jsx)(g,{enabled:h,sendRequest:z,children:n&&l?(0,r.jsxs)(r.Fragment,{children:[l===c.JP.Html&&(0,r.jsx)(R.$,{content:n,ref:I,onScreenshot:D}),l===c.JP.Svg&&(0,r.jsx)(C.d,{content:n}),l===c.JP.Mermaid&&(0,r.jsx)(b._,{content:n}),l===c.JP.React&&(0,r.jsx)(x.M,{content:n,handleError:W}),l===c.KD.Repl&&(0,r.jsx)(E.E,{initialCode:n,sendRequest:z})]}):A?(0,r.jsx)("div",{className:"flex min-h-full w-full items-center justify-center bg-gray-100 p-4",children:(0,r.jsx)(v,{title:"Loading is taking longer than expected",description:"There may be an issue with the content you’re trying to load. ",subtext:"The code itself may still be valid and functional. "})}):(0,r.jsx)("div",{className:"loader"})})},n)}},85658:function(e,t,n){"use strict";n.d(t,{ClientConfigurationProvider:function(){return a},E:function(){return i}});var r=n(27573),s=n(7653);let o=(0,s.createContext)(null);function a(e){let{children:t,value:n}=e;return(0,r.jsx)(o.Provider,{value:n,children:t})}function i(){let e=(0,s.useContext)(o);if(!e)throw Error("useClientConfiguration must be used within a ClientConfigurationProvider");return e}},70013:function(e,t,n){"use strict";n.d(t,{j:function(){return p}});var r=n(27573),s=n(7653),o=n(23996),a=n(42587),i=n(94303),l=n(52269),c=n(58153),d=n(16273);let u=()=>{let{zoomIn:e,zoomOut:t}=(0,o.M4)(),[n,u]=(0,s.useState)(!1),p=(0,s.useCallback)(()=>{let e=document,t=e.documentElement;e.fullscreenElement?e.exitFullscreen&&(e.exitFullscreen(),u(!1)):(t.requestFullscreen(),u(!0))},[]);return(0,r.jsx)("div",{className:"absolute bottom-2 right-2 z-10 flex flex-col",children:(0,r.jsxs)("div",{className:"flex flex-col gap-0.5 rounded-md border-[0.5px] border-[#636d83a0] p-0.5",children:[(0,r.jsx)(d.Button,{className:"flex !h-7 !w-7 items-center justify-center !border-0 !bg-transparent !px-0 !text-[#636D83] !shadow-none hover:!bg-[#3338421f]",variant:"outline",onClick:t=>{t.preventDefault(),e()},children:(0,r.jsx)(a.Z,{size:16})}),(0,r.jsx)("div",{className:"h-[0.5px] w-full px-1",children:(0,r.jsx)("hr",{className:"border-b-[0.5px] border-t-0 border-[#636D83a0]"})}),(0,r.jsx)(d.Button,{className:"flex !h-7 !w-7 items-center justify-center !border-0 !bg-transparent !px-0 !text-[#636D83] !shadow-none hover:!bg-[#3338421f]",variant:"outline",onClick:e=>{e.preventDefault(),t()},children:(0,r.jsx)(i.Z,{size:16})}),(0,r.jsx)("div",{className:"h-[0.5px] w-full px-1",children:(0,r.jsx)("hr",{className:"border-b-[0.5px] border-t-0 border-[#636D83a0]"})}),(0,r.jsx)(d.Button,{className:"flex !h-7 !w-7 items-center justify-center !border-0 !bg-transparent !px-0 !text-[#636D83] !shadow-none hover:!bg-[#3338421f]",variant:"outline",onClick:e=>{e.preventDefault(),p()},children:n?(0,r.jsx)(l.Z,{size:16}):(0,r.jsx)(c.Z,{size:16})})]})})},p=e=>{let{children:t,style:n}=e,[a,i]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=()=>{i(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e)}},[]),(0,r.jsx)("div",{className:"".concat(a?"fixed inset-0 z-50":"h-screen w-full"," [&>.react-transform-wrapper>.react-transform-component]:flex [&>.react-transform-wrapper>.react-transform-component]:h-full [&>.react-transform-wrapper>.react-transform-component]:w-full [&>.react-transform-wrapper>.react-transform-component]:cursor-move [&>.react-transform-wrapper>.react-transform-component]:items-center [&>.react-transform-wrapper>.react-transform-component]:justify-center [&>.react-transform-wrapper>.react-transform-component]:p-4 [&>.react-transform-wrapper]:h-full [&>.react-transform-wrapper]:w-full"),style:n,children:(0,r.jsxs)(o.d$,{doubleClick:{disabled:!1},children:[(0,r.jsx)(u,{}),(0,r.jsx)(o.Uv,{children:t})]})})}},93320:function(e,t,n){"use strict";n.d(t,{_:function(){return l}});var r=n(27573),s=n(7653),o=n(70013);let a={darkMode:!0,primaryColor:"#333842",secondaryColor:"#21252B",tertiaryColor:"#abb2bf",primaryTextColor:"#ABB2BF",secondaryTextColor:"#5c6370",tertiaryTextColor:"#4b5263",primaryBorderColor:"#636D83",secondaryBorderColor:"#5c6370",tertiaryBorderColor:"#4b5263",edgeLabelBackground:"#282C34",lineColor:"#636D83",textColor:"#abb2bf",pie1:"#56b6c2",pie2:"#61afef",pie3:"#c678dd",pie4:"#98c379",pie5:"#e06c75",pie6:"#d19a66",pieStrokeColor:"#2C313A",pieOuterStrokeColor:"#2C313A",fillType0:"#0d7377",fillType1:"#1f4e79",fillType2:"#8e44ad",fillType3:"#317732",fillType4:"#a31d48",fillType5:"#8f5c38",fillType6:"#a37d18",fillType7:"#4c5056"},i=()=>{let[e,t]=(0,s.useState)(null);return(0,s.useEffect)(()=>{(async()=>{try{let e=await Promise.all([n.e(473),n.e(443),n.e(915)]).then(n.bind(n,36256));t(e.default)}catch(e){console.error("Failed to load Mermaid: ".concat(e))}})()},[]),e},l=e=>{let{content:t}=e,n=i();(0,s.useEffect)(()=>{null==n||n.initialize({securityLevel:"strict",theme:"base",themeCSS:".label foreignObject { overflow: visible; }",themeVariables:{fontFamily:"monospace",fontSize:"14px",...a}})},[n]),(0,s.useEffect)(()=>{n&&setTimeout(()=>{let e=document.getElementById("mermaid");null==e||e.removeAttribute("data-processed"),null==n||n.contentLoaded()},1)},[t,n]);let l=async()=>{if(document.fullscreenElement){var e,t;await (null===(e=(t=document).exitFullscreen)||void 0===e?void 0:e.call(t))}else await document.documentElement.requestFullscreen()};return n?(0,r.jsxs)(o.j,{style:{backgroundColor:"rgb(40, 44, 52)"},children:[(0,r.jsx)("div",{id:"mermaid",className:"mermaid flex max-h-full max-w-full grow items-center justify-center self-stretch bg-[#282C34] [&>svg]:max-h-full [&>svg]:max-w-full",children:t}),(0,r.jsx)("button",{onClick:l,className:"absolute bottom-2 right-2 z-10 rounded-md bg-[#3338421f] px-2 py-1 text-[#636D83] hover:bg-[#3338423f]"})]}):(0,r.jsx)(r.Fragment,{children:"Loading..."})}},14492:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{E:function(){return ReplRenderer}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(27573),_ant_chat_components_Artifacts_api_actions__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(93558),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7653);function ReplRenderer(param){let{initialCode="",sendRequest}=param,fetchData=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(async e=>{if(sendRequest)return(await sendRequest(_ant_chat_components_Artifacts_api_actions__WEBPACK_IMPORTED_MODULE_1__.to.GetFile,{key:e,"@type":"type.googleapis.com/anthropic.claude.usercontent.sandbox.GetFileRequest"})).value},[sendRequest]),onFinish=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(e=>{null==sendRequest||sendRequest(_ant_chat_components_Artifacts_api_actions__WEBPACK_IMPORTED_MODULE_1__.to.SendConversationMessage,{messageType:"text",message:e,"@type":"type.googleapis.com/anthropic.claude.usercontent.sandbox.SendConversationMessageRequest"})},[sendRequest]),onError=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(e=>{null==sendRequest||sendRequest(_ant_chat_components_Artifacts_api_actions__WEBPACK_IMPORTED_MODULE_1__.to.SendConversationMessage,{messageType:"error",message:e,"@type":"type.googleapis.com/anthropic.claude.usercontent.sandbox.SendConversationMessageRequest"})},[sendRequest]);return(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{try{var _JSON_stringify;let res=eval(initialCode);onFinish(null!==(_JSON_stringify=JSON.stringify(res))&&void 0!==_JSON_stringify?_JSON_stringify:"")}catch(err){onError(err instanceof Error?err.message:String(err))}},[initialCode,onError,onFinish]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{})}},25828:function(e,t,n){"use strict";n.d(t,{$:function(){return m}});var r=n(27573),s=n(92882),o=n(53512),a=n(20054),i=n(7653),l=n(80478);function c(e,t){"function"==typeof e?e(t):"object"==typeof e&&null!==e&&"current"in e&&(e.current=t)}function d(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>c(t,e))}}function u(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,i.useCallback)(d(...t),t)}let p=i.forwardRef((e,t)=>{let{content:n,onScreenshot:c}=e,[d,p]=(0,i.useState)([]),m=(0,i.useRef)(null),g=u(m,t);(0,i.useEffect)(()=>{let e=e=>{let t=e.data;t&&"screenshotData"===t.type&&(null==c||c({success:!0,screenshot:t.data})),t&&"screenshotError"===t.type&&(null==c||c({success:!1,error:t.error})),t&&"console"===t.type&&t.message&&p(e=>[...e,t.message]),t&&"claudeComplete"===t.type&&window.claude.complete(t.prompt).then(e=>{var n,r;null===(r=m.current)||void 0===r||null===(n=r.contentWindow)||void 0===n||n.postMessage({type:"claudeComplete",completion:e,id:t.id},"*")}).catch(e=>{var n,r;null===(r=m.current)||void 0===r||null===(n=r.contentWindow)||void 0===n||n.postMessage({type:"claudeComplete",error:e instanceof Error?e.message:String(e),id:t.id},"*")}),t&&"openExternal"===t.type&&window.claude.openExternal(t.href)};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[c]);let f="\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/html-to-image/1.11.13/html-to-image.min.js\" integrity=\"sha512-iZ2ORl595Wx6miw+GuadDet4WQbdSWS3JLMoNfY8cRGoEFy6oT3G9IbcrBeL6AfkgpA51ETt/faX6yLV+/gFJg==\" crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\"></script>\n    <script>\n      (function() {\n        const originalConsole = window.console;\n        window.console = {\n          log: (...args) => {\n            originalConsole.log(...args);\n            window.parent.postMessage({ type: 'console', message: args.join(' ') }, '*');\n          },\n          error: (...args) => {\n            originalConsole.error(...args);\n            window.parent.postMessage({ type: 'console', message: 'Error: ' + args.join(' ') }, '*');\n          },\n          warn: (...args) => {\n            originalConsole.warn(...args);\n            window.parent.postMessage({ type: 'console', message: 'Warning: ' + args.join(' ') }, '*');\n          }\n        };\n\n        let requestId = 0;\n        let callbacksMap = new Map();\n        window.claude = {\n          complete: (prompt) => {\n            return new Promise((resolve, reject) => {\n              const id = requestId++;\n              callbacksMap.set(id, { resolve, reject });\n              window.parent.postMessage({ type: 'claudeComplete', id, prompt }, '*');\n            });\n          }\n        };\n\n        window.addEventListener('message', async (event) => {\n          if (event.data.type === 'takeScreenshot') {\n            const rootElement = document.getElementById('artifacts-component-root-html');\n            if (!rootElement) {\n              window.parent.postMessage({\n                type: 'screenshotError',\n                error: new Error('Root element not found'),\n              }, '*');\n            }\n            const screenshot = await htmlToImage.toPng(rootElement, {\n              imagePlaceholder:\n                \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAA1JREFUGFdjePDgwX8ACOQDoNsk0PMAAAAASUVORK5CYII=\",\n            });\n            window.parent.postMessage({\n              type: 'screenshotData',\n              data: screenshot,\n            }, '*');\n          } else if (event.data.type === 'claudeComplete') {\n            const callback = callbacksMap.get(event.data.id);\n            if (event.data.error) {\n              callback.reject(new Error(event.data.error));\n            } else {\n              callback.resolve(event.data.completion);\n            }\n            callbacksMap.delete(event.data.id);\n          }\n        });\n\n        window.addEventListener('click', (event) => {\n          const isEl = event.target instanceof HTMLElement;\n          if (!isEl) return;\n    \n          // find ancestor links\n          const linkEl = event.target.closest(\"a\");\n          if (!linkEl || !linkEl.href) return;\n    \n          event.preventDefault();\n          event.stopImmediatePropagation();\n    \n          let linkUrl;\n          try {\n            linkUrl = new URL(linkEl.href);\n          } catch (error) {\n            return;\n          }\n    \n          if (linkUrl.hostname === window.location.hostname) return;\n    \n          window.parent.postMessage({\n            type: 'openExternal',\n            href: linkEl.href,\n          }, '*');\n      });\n\n        const originalOpen = window.open;\n        window.open = function (url) {\n          window.parent.postMessage({\n            type: \"openExternal\",\n            href: url,\n          }, \"*\");\n        };\n\n        window.addEventListener('error', (event) => {\n          window.parent.postMessage({ type: 'console', message: 'Uncaught Error: ' + event.message }, '*');\n        });\n      })();\n    </script>\n  ",h=n.replace("<head>","<head>".concat(f));return h=h.replace(/<body(\s[^>]*)?>/i,e=>{let t=e.slice(5,-1);return"<body".concat(t,' id="artifacts-component-root-html">')}),(0,r.jsxs)(l.ResizablePanelGroup,{direction:"vertical",className:"h-screen",children:[(0,r.jsx)(l.ResizablePanel,{defaultSize:d.length>0?80:100,children:(0,r.jsx)("iframe",{ref:g,className:"h-full w-full",sandbox:"allow-scripts",allow:"clipboard-write",srcDoc:h})}),d.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.ResizableHandle,{withHandle:!0}),(0,r.jsx)(l.ResizablePanel,{defaultSize:20,children:(0,r.jsxs)("div",{className:"h-full overflow-auto p-4",style:{backgroundColor:"hsl(60 1.8% 22%)",backgroundImage:"linear-gradient(hsl(60 3.3% 17.8%), hsl(45 4.9% 16.1%))"},children:[(0,r.jsxs)("div",{className:"mb-2 inline-flex items-center gap-2 rounded-lg border px-2 py-1",style:{borderColor:"hsl(50 5.9% 40%)",color:"hsl(47 8.4% 79%)"},children:[(0,r.jsx)(s.Z,{size:12}),(0,r.jsx)("h2",{className:"gap-2 font-sans text-xs",children:"Console Messages"})]}),d.map((e,t)=>{let n=null,s={},i={color:"hsl(50 23.1% 94.9%)"};return e.startsWith("Error:")||e.startsWith("Uncaught Error:")?(n=(0,r.jsx)(o.Z,{size:12,className:"mt-1 shrink-0 text-red-500"}),s={backgroundColor:"rgba(255, 0, 0, 0.1)"},i.color="hsl(5 69.4% 72.9%)"):e.startsWith("Warning:")&&(n=(0,r.jsx)(a.Z,{size:12,className:"mt-1 shrink-0 text-yellow-500"}),s={backgroundColor:"rgba(255, 255, 0, 0.1)"},i.color="hsl(18 50.4% 47.5%)"),(0,r.jsxs)("div",{className:"mb-0.5 flex items-start gap-2 rounded-lg px-2 py-1",style:s,children:[(0,r.jsx)(r.Fragment,{children:n}),(0,r.jsx)("pre",{className:"flex-grow text-wrap font-mono text-sm",style:i,children:e})]},t)})]})})]})]})});p.displayName="UnsafeHtmlRenderer";let m=i.memo(p)},26853:function(e,t,n){"use strict";n.d(t,{d:function(){return g}});var r=n(27573),s=n(7653),o=n(70013),a=n(98533),i=n.n(a),l=n(18387);let c=e=>{let t=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([0-9.]+))?\)/);if(!t)return console.error("Invalid color format:",e),e;let[,n,r,s,o="1"]=t,a=parseInt(n,10),l=parseInt(r,10),c=parseInt(s,10),d=parseFloat(o),[u,p,m]=i().rgb.hsl(a,l,c),g=Math.max(0,p-5),f=Math.max(0,m-25),[h,w,y]=i().hsl.rgb([u,g,f]);return"rgba(".concat(h,", ").concat(w,", ").concat(y,", ").concat(.8*d,")")},d=e=>{let t=new XMLSerializer().serializeToString(e),n=window.btoa(t);return"data:image/svg+xml;base64,".concat(n)},u=e=>{let t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t},p=async(e,t)=>{let n=d(e);return new Promise((e,r)=>{let s=new Image;s.onload=async()=>{let n=u(s);try{let r=await t.getColorAsync(n),s=c(r.rgba),o=r.isDark?"#fff":"#000";e({backgroundColor:s,textColor:o})}catch(e){r(e)}},s.onerror=r,s.src=n})},m=e=>{let[t,n]=(0,s.useState)(""),[r,o]=(0,s.useState)("");return(0,s.useEffect)(()=>{let t=new l.Z,r=e.current;if(!r)return;let s=r.querySelector("svg");s&&p(s,t).then(e=>{let{backgroundColor:t,textColor:r}=e;n(t),o(r)}).catch(e=>{console.error("Error getting average color:",e)})},[e]),{backgroundColor:t,textColor:r}},g=e=>{let{content:t}=e,n=(0,s.useRef)(null),{backgroundColor:a,textColor:i}=m(n);return(0,r.jsx)(o.j,{style:{backgroundColor:a,color:i},children:(0,r.jsx)("div",{id:"artifacts-component-root-svg",ref:n,className:"h-full w-full",dangerouslySetInnerHTML:{__html:t}})})}},17796:function(e,t,n){"use strict";n.d(t,{A:function(){return i},i:function(){return a}});var r=n(93558),s=n(37584);let o=new Map;class a{setupMessageListener(){window.addEventListener("message",this.boundHandleMessage,!1)}handleMessage(e){if(e.origin!==this.allowedOrigin||e.source!==this.iframe.contentWindow)return;let t=Date.now();if(t-this.lastResetTime>this.RESET_INTERVAL&&(this.messageCount=0,this.lastResetTime=t),this.messageCount++,this.messageCount>this.MAX_MESSAGES_PER_INTERVAL){window.removeEventListener("message",this.boundHandleMessage),this.onRateLimited&&this.onRateLimited();return}let n=s.qV.safeParse(e.data);if(!n.success){console.warn("Received message does not conform to basic message shape, ignoring");return}let r=n.data;if("response"===r.channel){this.handleResponse(r);return}this.messageQueue.push(r),this.isConsumerRunning||this.consumeMessages()}handleResponse(e){let t=this.inFlightRequests.get(e.requestId)||o.get(e.requestId);if(void 0!==t){t(e),o.delete(e.requestId);return}}async consumeMessages(){for(this.isConsumerRunning=!0;this.messageQueue.length>0;){let e=this.messageQueue.shift();if(!e)continue;let t=r.P2.safeParse(e.method);if(!t.success){this.sendErrorResponse(e.requestId,400,"Unknown method");continue}let n=t.data,o=r.q2.safeParse(e);if(!o.success){this.sendErrorResponse(e.requestId,400,"Invalid payload content");continue}let a=o.data;if(this.requestLog.has(a.requestId)){this.sendErrorResponse(a.requestId,400,"Request ID already processed");continue}this.requestLog.set(a.requestId,{message:a,requestTimestamp:new Date().getTime()}),await this.onPermissionRequested(n).then(e=>"denied"!==e||(this.sendErrorResponse(a.requestId,403,"Permission denied"),!1)).catch(e=>(console.error("Error checking permission for method ".concat(n,":"),e),this.sendErrorResponse(a.requestId,500,"Error checking permission"),!1))&&(this.onCapabilityAction(a,this.boundSendRequest).then(e=>{var t;let n=s.Tk.parse({channel:"response",status:200,requestId:a.requestId,payload:null!=e?e:s.D7}),r=this.requestLog.get(a.requestId);r&&this.requestLog.set(a.requestId,{...r,response:n,responseTimestamp:new Date().getTime()}),null===(t=this.iframe.contentWindow)||void 0===t||t.postMessage(n,this.allowedOrigin)}).catch(e=>{console.error("Error processing action for method ".concat(n,":"),e),this.sendErrorResponse(a.requestId,500,"Internal server error while processing action")}),await new Promise(e=>requestAnimationFrame(e)))}this.isConsumerRunning=!1}sendErrorResponse(e,t,n){var r;let o=s.Kj.parse({channel:"response",status:t,requestId:e,payload:(0,s.v8)(n)}),a=this.requestLog.get(e);a&&this.requestLog.set(e,{...a,response:o,responseTimestamp:new Date().getTime()}),null===(r=this.iframe.contentWindow)||void 0===r||r.postMessage(o,this.allowedOrigin)}restartListening(){window.removeEventListener("message",this.boundHandleMessage),this.messageCount=0,this.lastResetTime=Date.now(),this.setupMessageListener()}cleanup(){window.removeEventListener("message",this.boundHandleMessage),this.messageQueue=[],this.isConsumerRunning=!1,this.inFlightRequests.clear()}async sendRequest(e,t){return new Promise((n,a)=>{var i;let l=Date.now().toString(),c={channel:"request",method:e,requestId:l,payload:t},d=e=>{let t=s.Tk.safeParse(e);if(!t.success){a(Error("Invalid response format"));return}let o=t.data;if(o.status>=400){let e=s.Kj.safeParse(o);e.success?a(Error(e.data.payload.error)):a(Error("Error response (".concat(o.status,")")));return}let i=r.O3.safeParse(o);i.success?n(i.data.payload):a(Error("Invalid response payload for the method"))};this.inFlightRequests.set(l,d),o.set(l,d),null===(i=this.iframe.contentWindow)||void 0===i||i.postMessage(c,this.allowedOrigin)})}getRequestLog(){return Array.from(this.requestLog.entries()).map(e=>{let[t,n]=e;return{...n,requestId:t}}).sort((e,t)=>t.requestTimestamp-e.requestTimestamp)}constructor({iframe:e,allowedOrigin:t,onRateLimited:n=null,onPermissionRequested:r,onCapabilityAction:s}){this.messageCount=0,this.lastResetTime=Date.now(),this.MAX_MESSAGES_PER_INTERVAL=30,this.RESET_INTERVAL=5e3,this.onRateLimited=null,this.messageQueue=[],this.isConsumerRunning=!1,this.requestLog=new Map,this.inFlightRequests=new Map,this.iframe=e,this.allowedOrigin=t,this.onRateLimited=n,this.onPermissionRequested=r,this.onCapabilityAction=s,this.boundHandleMessage=this.handleMessage.bind(this),this.boundSendRequest=this.sendRequest.bind(this),this.setupMessageListener()}}class i{setupMessageListener(){window.addEventListener("message",this.boundHandleMessage,!1)}handleMessage(e){if(!1===this.allowedOrigins.includes(e.origin)||e.source!==this.parentWindow)return;let t=s.qV.safeParse(e.data);if(!t.success){console.warn("Received message does not conform to basic request shape, ignoring");return}let n=t.data;if("response"===n.channel){this.handleResponse(n);return}if(!r.Wy.safeParse(n.method).success){this.sendErrorResponse(n.requestId,400,"Unknown method");return}let o=r.N7.safeParse(n);if(!o.success){this.sendErrorResponse(n.requestId,400,"Invalid payload content");return}let a=o.data;this.onOutsideRequest(a).then(e=>{let t=s.Tk.parse({channel:"response",status:200,requestId:a.requestId,payload:null!=e?e:s.D7});this.sendMessage(t)}).catch(e=>{console.error("Error processing action for method ".concat(a.method,":"),e),this.sendErrorResponse(a.requestId,500,"Internal error while processing action")})}sendErrorResponse(e,t,n){let r=s.Kj.parse({channel:"response",status:t,requestId:e,payload:(0,s.v8)(n)});this.sendMessage(r)}sendMessage(e){this.allowedOrigins.forEach(t=>{this.parentWindow.postMessage(e,t)})}cleanup(){window.removeEventListener("message",this.boundHandleMessage),this.inFlightRequests.clear()}handleResponse(e){let t=this.inFlightRequests.get(e.requestId);if(void 0!==t){t(e);return}}async sendRequest(e,t){return new Promise((n,o)=>{let a=Date.now().toString()+Math.random().toString(),i={channel:"request",method:e,requestId:a,payload:t},l=e=>{let t=s.Tk.safeParse(e);if(!t.success){o(Error("Invalid response format"));return}let a=t.data;if(a.status>=400){let e=s.Kj.safeParse(a);e.success?o(Error(e.data.payload.error)):o(Error("Error response (".concat(a.status,")")));return}let i=r.FO.safeParse(a);i.success?n(i.data.payload):o(Error("Invalid response payload for the method"))};this.inFlightRequests.set(a,l),this.sendMessage(i)})}constructor({parentWindow:e,allowedOrigins:t,onOutsideRequest:n}){this.inFlightRequests=new Map,this.parentWindow=e,this.allowedOrigins=t,this.onOutsideRequest=n,this.boundHandleMessage=this.handleMessage.bind(this),this.setupMessageListener()}}}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[8672,8184,5458,1065,4310,8437,5382,1270,443,669,7157,1477,6261,5279,3558,4814,1293,1528,1744],function(){return t(66624)}),_N_E=e.O()}]);