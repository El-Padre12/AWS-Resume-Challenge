"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8222],{89705:function(e,n,t){t.d(n,{EM:function(){return c},VV:function(){return v},_O:function(){return s},b8:function(){return d}});var i=t(5362),r=t(27218),u=t(27895),a=t(13262),o=t(10228),l=t(77930);let c=()=>{let{account:e,activeOrganization:n}=(0,r.t)(),t=null==e?void 0:e.uuid,c=null==n?void 0:n.uuid,{addError:d}=(0,u.e)(),s=(0,l.useQueryClient)();return(0,i.uC)("/api/organizations/".concat(c,"/sync/mcp/drive/ingest"),"POST",{onSuccess:()=>{setTimeout(()=>{s.invalidateQueries({queryKey:[a.dY,{orgUuid:c,accountUuid:t,syncSourceType:o.Fg.GDRIVE}]})},300)},onError:e=>{d(e)}})},d=()=>{let{activeOrganization:e}=(0,r.t)(),n=null==e?void 0:e.uuid,{addError:t}=(0,u.e)(),c=(0,l.useQueryClient)();return(0,i.uC)("/api/organizations/".concat(n,"/sync/ingestion/gdrive/clean_up"),"POST",{onSuccess:()=>{c.invalidateQueries({queryKey:[a.dY,{orgUuid:n,syncSourceType:o.Fg.GDRIVE}]})},onError:e=>{t(e)}})},s=e=>{let{activeOrganization:n}=(0,r.t)(),t=null==n?void 0:n.uuid,u=(0,l.useQueryClient)();return(0,i.uC)("/api/organizations/".concat(t,"/projects/").concat(e,"/kb/resync"),"POST",{enabled:!!e,meta:{noToast:!0},onSuccess:n=>{"done"===n.status&&u.invalidateQueries({queryKey:[a.rt,{orgUuid:t,projectUuid:e}]})}})},v=function(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{activeOrganization:t}=(0,r.t)(),u=null==t?void 0:t.uuid;return(0,i.WE)("/api/organizations/".concat(u,"/projects/").concat(e,"/kb/stats"),{queryKey:[a.rt,{orgUuid:u,projectUuid:e}],enabled:!!e&&n})}},2949:function(e,n,t){t.d(n,{$Z:function(){return L},Aj:function(){return E},EU:function(){return P},En:function(){return I},MN:function(){return b},Mv:function(){return w},Xv:function(){return A},ez:function(){return O},mD:function(){return D},nC:function(){return T},oE:function(){return S},qZ:function(){return M},r7:function(){return q},td:function(){return z},u7:function(){return N}});var i=t(19170),r=t(5362),u=t(27218),a=t(13262),o=t(87033),l=t(10228),c=t(88755),d=t(77930),s=t(81695),v=t(7653),g=t(89705),f=t(51879),p=t(22534),_=t(19132),m=t(68571);let y="gdrive_success",b=()=>{let e=(0,u.Cf)(),{data:n}=(0,_.tc)(),t=!!(Array.isArray(n)&&n.find(e=>e.type===l.Fg.GDRIVE&&e.enabled));return!e||t},h=()=>{let{value:e}=(0,o.FL)("kingfisher_enabled");return e},E=()=>{let e=b(),n=h();return!!(!m.env.NEXT_PUBLIC_DISABLE_GDRIVE_INTEGRATION&&n&&e)},S=()=>{let{account:e,activeOrganization:n}=(0,u.t)(),t=null==n?void 0:n.uuid,i=E(),{data:o,isFetched:l}=(0,r.WE)("/api/organizations/".concat(t,"/sync/mcp/drive/auth"),{queryKey:[a.Yw,{accountUUID:null==e?void 0:e.uuid,orgUUID:t}],enabled:i,staleTime:3e5});return{isAuthenticated:i&&!!(null==o?void 0:o.is_authenticated),isFetched:l}},C=e=>{let{callerIdentifier:n}=e,t=(0,s.usePathname)(),{account:i,activeOrganization:o}=(0,u.t)(),l=null==i?void 0:i.uuid,g=null==o?void 0:o.uuid,f=E(),p=(0,s.useRouter)(),m=(0,d.useQueryClient)(),b=(0,c.Q)(),h=(0,s.useSearchParams)(),{mutate:S}=(0,r.uC)("/api/organizations/".concat(g,"/sync/mcp/drive/auth/start"),"POST",{enabled:f,onSuccess:e=>{p.push(e.redirect_url)}}),C=(0,v.useRef)(!1);return()=>{if(!f)return;let e="".concat(y,"=").concat(n),i=(0,_.LZ)({pathname:t,searchParams:h,queryString:e,isClaudeApp:b});if(m.invalidateQueries({queryKey:[a.Yw,{accountUUID:l,orgUUID:g}]}),b){window.open("/settings/integrations?open_in_browser=1&auth_start=gdrive&origin=".concat(i));return}C.current||(C.current=!0,S({pre_auth_state:{origin:i},redirect_uri:new URL("/connect/mcp/drive/callback",window.location.origin).toString()}))}},T=function(){let{callerIdentifier:e,handleAuthSuccess:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{isAuthenticated:t,isFetched:i}=S(),{dropdownToOpen:r,clearCallerIdentifier:u}=(0,f.J)(),a=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];null==n||n(e)},o=C({callerIdentifier:e});return(0,_.BZ)({callerIdentifier:e,successParam:y,handleOpen:a}),(0,v.useEffect)(()=>{e&&r===e&&(null==n||n(!0),u())},[r,n,e,u]),{isDriveAuthenticated:t,initDriveAuth:o,handleDriveTrigger:a,isFetched:i}},I=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:n,activeOrganization:t}=(0,u.t)(),i=null==n?void 0:n.uuid,o=null==t?void 0:t.uuid,l=E(),c=(0,d.useQueryClient)(),{mutate:s}=(0,g.b8)();return(0,r.uC)("/api/organizations/".concat(o,"/sync/mcp/drive/auth"),"DELETE",{enabled:!!(t&&l),...e,onSuccess:function(){for(var n,t=arguments.length,r=Array(t),u=0;u<t;u++)r[u]=arguments[u];c.invalidateQueries({queryKey:[a.Yw,{accountUUID:i,orgUUID:o}]}),s({}),null===(n=e.onSuccess)||void 0===n||n.call(e,...r)}})},w=e=>{let{documentId:n}=e,{account:t,activeOrganization:i}=(0,u.t)(),o=null==t?void 0:t.uuid,l=null==i?void 0:i.uuid,c=E(),s=(0,d.useQueryClient)(),g=(0,r.WE)("/api/organizations/".concat(l,"/sync/mcp/drive/document/").concat(n,"?include_content=false"),{queryKey:[a.HI,{accountUUID:o,orgUUID:l,documentId:n}],enabled:c,meta:{noToast:!0}}),f=g.isError;return(0,v.useEffect)(()=>{f&&s.invalidateQueries({queryKey:[a.Yw,{accountUUID:o,orgUUID:l}]})},[s,f,o,l]),g};function A(e){let{uri:n}=e,{data:t,isLoading:i}=w({documentId:n});return{title:null==t?void 0:t.title,isLoading:i}}let D=e=>{let{account:n,activeOrganization:t}=(0,u.t)(),i=null==n?void 0:n.uuid,o=null==t?void 0:t.uuid,l=E(),c=(0,v.useMemo)(()=>e.map(e=>"/api/organizations/".concat(o,"/sync/mcp/drive/document/").concat(e)),[e,o]),d=(0,v.useMemo)(()=>({queryKey:e.map(e=>[a.Yp,{accountUUID:i,orgUUID:o,documentId:e}]),enabled:l,meta:{noToast:!0}}),[e,i,o,l]);return(0,r.Nl)(c,d)},z=e=>{let{account:n,activeOrganization:t}=(0,u.t)(),i=null==n?void 0:n.uuid,o=null==t?void 0:t.uuid,l=E(),c=(0,p.F7)(),{data:d,isSuccess:s,isLoading:g}=(0,r.WE)("/api/organizations/".concat(o,"/sync/mcp/drive/recents"),{queryKey:[a.s8,{accountUUID:i,orgUUID:o}],enabled:e&&l,meta:{noToast:!0}});return(0,v.useEffect)(()=>{if(s&&d){let e=d.map(e=>{let{uri:n,title:t}=e;return{uri:n,title:t}});(0,p.MU)(e)}},[s,d]),{recentDriveDocs:s?d:c,isLoading:g}},L=()=>{let e=h(),{value:n}=(0,o.FL)("apps_use_bananagrams");return e&&n},O=()=>{let e=E(),n=L();return e&&n&&!m.env.NEXT_PUBLIC_DISABLE_GDRIVE_INTEGRATION},P=e=>{var n;let t=O(),{account:i}=(0,u.t)();return!!t&&(e?!!(null==e?void 0:null===(n=e.conversationSettings)||void 0===n?void 0:n.enabled_bananagrams):!!(null==i?void 0:i.settings.enabled_bananagrams))},N=()=>(0,o.FL)("rag_prototype").value,q=()=>{let e=O(),n=(0,u.Cf)(),{data:t}=(0,_.tc)(),{account:i}=(0,u.t)(),r=N();return!!e&&!!r&&(n?!!(Array.isArray(t)&&t.find(e=>{var n;return e.type===l.Fg.GDRIVE&&e.enabled&&(null===(n=e.config)||void 0===n?void 0:n.allow_indexing)})):!!(null==i?void 0:i.settings.enabled_gdrive_indexing))},M=()=>{let{account:e}=(0,u.t)(),{mutate:n}=(0,i.Ck)(),{mutate:t}=(0,g.EM)();return{toggleDriveSearchAndIndexingEnabled:i=>{var r;let{indexingEnabled:u,searchEnabled:a,dismissBanner:o}=i,l=o||!!u;u&&t({}),n({...null==e?void 0:e.settings,...void 0!==u?{enabled_gdrive_indexing:u}:null,...void 0!==a||!0===u?{enabled_bananagrams:null!=u?u:a}:null,...l?{dismissed_claudeai_banners:[...(null==e?void 0:null===(r=e.settings)||void 0===r?void 0:r.dismissed_claudeai_banners)||[],{banner_id:"drive_indexing_enablement_2/11_1",dismissed_at:new Date().toISOString()}]}:null})}}}},89111:function(e,n,t){t.d(n,{H7:function(){return E},Mr:function(){return S},N:function(){return h},Y$:function(){return I},Yn:function(){return b}});var i,r,u,a,o=t(5362),l=t(27218),c=t(13262),d=t(10228),s=t(88755),v=t(77930),g=t(81695),f=t(7653),p=t(19132),_=t(68571);let m="github_success";(i=u||(u={})).PENDING="pending",i.STARTED="started",i.COMPLETED="completed",i.FAILED="failed",(r=a||(a={})).PATH_NOT_FOUND="path_not_found",r.INVALID_SHA="invalid_sha",r.SIZE_LIMIT_EXCEEDED="size_limit_exceeded",r.SOURCE_MISSING_OR_CHANGED="source_missing_or_changed";let y=e=>{let{shouldFetch:n=!1}=e,{activeOrganization:t}=(0,l.t)(),i=null==t?void 0:t.uuid,r=E();return(0,o.WE)("/api/organizations/".concat(i,"/sync/github/auth"),{queryKey:[c.Os,{orgUUID:i}],enabled:!!(n&&t&&r)})},b=function(){var e;let{callerIdentifier:n,toggleGithubModalOpen:t,fetchImmediately:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:r}=(0,l.t)(),u=null==r?void 0:r.uuid,a=E(),c=(0,g.useRouter)(),[d,v]=(0,f.useState)(i),_=y({shouldFetch:d}),b=(0,f.useCallback)(async()=>{var e,n;return d?null===(n=_.data)||void 0===n?void 0:n.is_authenticated:(v(!0),null===(e=(await _.refetch()).data)||void 0===e?void 0:e.is_authenticated)},[_,d]),{mutate:h}=(0,o.uC)("/api/organizations/".concat(u,"/sync/github/auth/start"),"POST",{enabled:!!(r&&a),onSuccess:e=>{c.push(e.redirect_url)}}),S="".concat(m,"=").concat(n);(0,p.BZ)({callerIdentifier:n,successParam:m,handleOpen:()=>{null==t||t(!0)}});let C=(0,g.useSearchParams)(),T=(0,s.Q)(),I=(0,f.useRef)(!1),w=(0,g.usePathname)(),A=(0,p.LZ)({pathname:w,searchParams:C,queryString:S,isClaudeApp:T});return{checkIsGithubAuthenticated:b,initGithubAuth:()=>{if(a){if(T){window.open("/settings/integrations?open_in_browser=1&auth_start=github&origin=".concat(A));return}I.current||(I.current=!0,h({pre_auth_state:{origin:A}}))}},isGithubAuthenticated:!!(null===(e=_.data)||void 0===e?void 0:e.is_authenticated)}},h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,l.t)(),t=null==n?void 0:n.uuid,i=E(),r=(0,v.useQueryClient)();return(0,o.uC)("/api/organizations/".concat(t,"/sync/github/auth"),"DELETE",{enabled:!!(n&&i),...e,onSuccess:function(){for(var n,i=arguments.length,u=Array(i),a=0;a<i;a++)u[a]=arguments[a];r.invalidateQueries({queryKey:[c.Os,{orgUUID:t}]}),null===(n=e.onSuccess)||void 0===n||n.call(e,...u)}})},E=()=>{let{data:e}=(0,p.tc)(),n=(0,l.Cf)(),t=!!(Array.isArray(e)&&e.find(e=>e.type===d.Fg.GITHUB&&e.enabled));return!!(!_.env.NEXT_PUBLIC_DISABLE_GITHUB_INTEGRATION&&(!n||t))},S=()=>{let{activeOrganization:e}=(0,l.t)(),n=null==e?void 0:e.uuid,t=E();return(0,o.WE)("/api/organizations/".concat(n,"/sync/github/repos"),{queryKey:[c.wD,{orgUUID:n}],enabled:!!(e&&t),meta:{noToast:!0}})},C=e=>{let{owner:n,repo:t,branch:i}=e,{activeOrganization:r}=(0,l.t)(),u=null==r?void 0:r.uuid,a=E(),d=new URLSearchParams({owner:null!=n?n:"",repo:null!=t?t:""}).toString();return(0,o.WE)("/api/organizations/".concat(u,"/sync/github/repo?").concat(d),{queryKey:[c.Rz,{orgUUID:u,owner:n,repo:t}],enabled:!!(n&&t&&!i&&r&&a),meta:{noToast:!0}})},T=e=>{let{owner:n,repo:t,branch:i}=e,{activeOrganization:r}=(0,l.t)(),u=null==r?void 0:r.uuid,a=E();return(0,o.WE)("/api/organizations/".concat(u,"/sync/github/repo/").concat(n,"/").concat(t,"/tree/").concat(i),{queryKey:[c.E0,{orgUUID:u,owner:n,repo:t,branch:i}],staleTime:3e5,enabled:!!(n&&t&&i&&r&&a),meta:{noToast:!0}})},I=e=>{var n;let{owner:t,repo:i,branch:r}=e,u=C({owner:t,repo:i,branch:r}),a=T({owner:t,repo:i,branch:r||(null===(n=u.data)||void 0===n?void 0:n.default_branch)});return{data:{repo:u.data,tree:a.data},isFetching:u.isFetching||a.isFetching,error:u.error||a.error}}},51375:function(e,n,t){t.d(n,{hX:function(){return y},PQ:function(){return z},q:function(){return A},YB:function(){return I},si:function(){return S},cH:function(){return b},S9:function(){return E},Pl:function(){return T},tF:function(){return C},$Y:function(){return w}}),t(95622);var i=t(19170),r=t(28803),u=t(3053),a=t(27218),o=t(87033),l=t(88755),c=t(76736),d=t.n(c),s=t(81695),v=t(7653),g=t(41270),f=t(91217),p=t(58183),_=t(85465),m=t(19132);let y=(0,v.createContext)({mcpClients:{},servers:[],mcpTools:[],isLoading:!1,isEnabled:!1}),b=()=>{let e=(0,v.useContext)(y);return e||console.warn("useMcp being used outside of McpProvider, this is probably a bug"),e},h=()=>{let{value:e}=(0,o.FL)("claude_ai_allow_tool_always_allow");return e},E=()=>{let e=h(),{getMcpToolApprovalRequestSetting:n}=function(){let{value:e}=(0,p.useDynamicConfig)("mcp_tool_approval_config"),n=(0,v.useCallback)((n,t,i)=>{var r,u,a,o;return e?(null===(r=e[n])||void 0===r?void 0:r[t])!==void 0?e[n][t]:(null===(u=e[n])||void 0===u?void 0:u["*"])!==void 0?e[n]["*"]:(null===(a=e["*"])||void 0===a?void 0:a[t])!==void 0?e["*"][t]:(null===(o=e["*"])||void 0===o?void 0:o["*"])!==void 0?e["*"]["*"]:i:i},[e]);return{toolApprovalConfig:e,getMcpToolApprovalRequestSetting:n}}();return{getApprovalSetting:(0,v.useCallback)((t,i)=>{var r;let u=n(null!=t?t:"",null!==(r=null==i?void 0:i.name)&&void 0!==r?r:"",e?"perChat":"always");return{approvalSetting:u,alwaysAllowEnabled:"perChat"===u}},[e,n])}},S=()=>{let{activeOrganization:e}=(0,a.t)(),n=(0,s.usePathname)(),t=(0,s.useSearchParams)(),i=(0,l.Q)(),r=(0,m.LZ)({pathname:n,searchParams:t,queryString:"",isClaudeApp:i});return n=>{window.location.href="/api/organizations/".concat(null==e?void 0:e.uuid,"/mcp/start-auth/").concat(n.uuid,"?redirect_url=").concat(r,"&open_in_browser=1")}},C=()=>{let{servers:e}=b();return!!(0,l.Q)()&&(e.filter(e=>{let{type:n}=e;return"local"===n})||[]).length>0},T=()=>{var e,n,t;let i=(0,f.r)(),r=(null===(e=i.pendingConversationSettings)||void 0===e?void 0:e.compass_mode)==="advanced"||(null===(t=i.conversation)||void 0===t?void 0:null===(n=t.conversationSettings)||void 0===n?void 0:n.compass_mode)==="advanced",{servers:u}=b(),a=(u.filter(e=>{let{type:n}=e;return"remote"===n})||[]).length>0;return r&&a},I=()=>{var e;let n=null!==(e=(0,_.gE)("enabled_mcp_tools"))&&void 0!==e?e:{};return(0,v.useMemo)(()=>Object.entries(n).filter(e=>{let[n,t]=e;return!!t}).map(e=>{let[n]=e;return n}),[n])},w=()=>{let{conversation:e}=(0,f.r)(),{account:n}=(0,a.t)(),{track:t}=(0,u.z$)(),{mutate:o}=(0,i.Ck)(),{mutate:l}=(0,r.T$)(null==e?void 0:e.id);return{toggleMcpToolEnabled:(i,r)=>{if(!n)return;let u=Array.isArray(i)?i.reduce((e,n)=>({...e,[n]:r}),{}):{[i]:r};if(e){var a;l({settings:{enabled_mcp_tools:{...null===(a=e.conversationSettings)||void 0===a?void 0:a.enabled_mcp_tools,...u}}})}let c=n.settings.enabled_mcp_tools;o({...n.settings,enabled_mcp_tools:{...c,...u}}),t({event_key:"claudeai.conversation.setting.toggled",conversation_uuid:(null==e?void 0:e.id)||null,setting:"enabled_mcp_tools.".concat(i),value:r})},toggleMcpToolAlwaysApproved:(e,t,i)=>{if(!n)return;let r=z(e,t),u=n.settings.enabled_mcp_tools;o({...n.settings,enabled_mcp_tools:{...u,[r]:i}})}}};function A(e,n){return"".concat(e,":").concat(n)}let D=g.z.object({description:g.z.string().optional(),type:g.z.string().optional(),title:g.z.string().optional()}).optional();function z(e,n){let t=A(e,n.name),i=n.description||"",r=function(e){var n;let t=Object.entries((null===(n=e.inputSchema)||void 0===n?void 0:n.properties)||{}),i=[];for(let[e,n]of t){let{data:t}=D.safeParse(n),r=(null==t?void 0:t.description)||"";i.push([e,r])}return i.sort((e,n)=>e[0].localeCompare(n[0])).flat().join(",")}(n),u=d().createHash("md5").update("".concat(i,":").concat(r)).digest("hex");return"".concat(t,"-").concat(u)}},74339:function(e,n,t){t.d(n,{J$:function(){return d},Zf:function(){return c},fX:function(){return g},vc:function(){return s},yb:function(){return v}});var i=t(5362),r=t(27218),u=t(13262);t(10228);var a=t(77930);t(7653);var o=t(19132);let l=e=>{let{documentId:n}=e,{account:t,activeOrganization:a}=(0,r.t)(),o=null==t?void 0:t.uuid,l=null==a?void 0:a.uuid,c=d();return(0,i.WE)("/api/organizations/".concat(l,"/sync/mcp/outline/document/").concat(n),{queryKey:[u.q2,{accountUUID:o,orgUUID:l,documentId:n}],enabled:c})},c=e=>{let{uri:n}=e,{data:t,isLoading:i}=l({documentId:n});return{title:null==t?void 0:t.title,isLoading:i}},d=()=>{let{data:e}=(0,o.tc)();return!1},s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:n,activeOrganization:t}=(0,r.t)(),a=null==t?void 0:t.uuid,o=d(),{data:l,refetch:c}=(0,i.WE)("/api/organizations/".concat(a,"/sync/mcp/outline/auth"),{queryKey:[u.Sp,{accountUUID:null==n?void 0:n.uuid,orgUUID:a}],enabled:!!(t&&o),staleTime:5e3}),{mutate:s,isPending:v}=(0,i.uC)("/api/organizations/".concat(a,"/sync/mcp/outline/auth/start"),"POST",{enabled:!!(t&&o),...e,onSuccess:function(){for(var n,t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];null===(n=e.onSuccess)||void 0===n||n.call(e,...i)}});return{isOutlineAuthenticated:!!(null==l?void 0:l.is_authenticated),refetch:c,initOutlineAuth:s,isLoadingOutlineAuthInit:v}},v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:n,activeOrganization:t}=(0,r.t)(),o=null==n?void 0:n.uuid,l=null==t?void 0:t.uuid,c=d(),s=(0,a.useQueryClient)();return(0,i.uC)("/api/organizations/".concat(l,"/sync/mcp/outline/auth"),"DELETE",{enabled:!!(t&&c),...e,onSuccess:function(){for(var n,t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];s.invalidateQueries({queryKey:[u.Sp,{accountUUID:o,orgUUID:l}]}),null===(n=e.onSuccess)||void 0===n||n.call(e,...i)}})},g=()=>{let e=encodeURIComponent(window.location.href);window.location.href="/settings/integrations?redirect_url=".concat(e,"&open_outline_auth=true")}},85465:function(e,n,t){t.d(n,{M0:function(){return m},gE:function(){return _},lP:function(){return f}});var i=t(19170),r=t(28803),u=t(3053),a=t(27218),o=t(87033),l=t(10228),c=t(98649),d=t(91217),s=t(2949),v=t(89111),g=t(74339);let f=()=>{let{initGithubAuth:e}=(0,v.Yn)(),{initDriveAuth:n}=(0,s.nC)();return t=>{t===l.Fg.GITHUB?e():t===l.Fg.GDRIVE?n():t===l.Fg.OUTLINE&&(0,g.fX)()}},p=()=>{let e=(0,o.FL)("claudeai_paprika_sticky"),n=["enabled_web_search","enabled_bananagrams","enabled_sourdough","enabled_foccacia","enabled_mcp_tools","enabled_monkeys_in_a_barrel","enabled_saffron"];return e&&n.push("paprika_mode"),n},_=e=>{let{conversation:n,pendingConversationSettings:t}=(0,d.r)(),{account:i}=(0,a.t)(),r=p();if(n){var u;return null===(u=n.conversationSettings)||void 0===u?void 0:u[e]}return r.includes(e)?null==i?void 0:i.settings[e]:null==t?void 0:t[e]},m=()=>{let{conversation:e,setPendingConversationSettings:n}=(0,d.r)(),{account:t}=(0,a.t)(),o=p(),{track:l}=(0,u.z$)(),{mutate:s}=(0,i.Ck)(),{mutate:v}=(0,r.T$)(null==e?void 0:e.id);return{toggleConversationSetting:(i,r)=>{if(!t)return;let u={};e&&v({settings:{[i]:r,...u}}),o.includes(i)?s({...t.settings,[i]:r}):c.YA.includes(i)&&!e&&n({[i]:r,...u}),l({event_key:"claudeai.conversation.setting.toggled",conversation_uuid:(null==e?void 0:e.id)||null,setting:i,value:r})}}}},51879:function(e,n,t){t.d(n,{J:function(){return c},Q:function(){return l}});var i=t(27573),r=t(35919),u=t.n(r),a=t(7653);let o=(0,a.createContext)({isOpen:!1,dropdownToOpen:void 0,openModal:u(),closeModal:u(),clearCallerIdentifier:u()}),l=e=>{let{children:n}=e,[t,r]=(0,a.useState)(!1),u=(0,a.useRef)(void 0),[l,c]=(0,a.useState)(void 0);return(0,i.jsx)(o.Provider,{value:{isOpen:t,openModal:e=>{r(!0),u.current=e},closeModal:()=>{r(!1),c(u.current)},dropdownToOpen:l,clearCallerIdentifier:()=>{c(void 0)}},children:n})},c=()=>(0,a.useContext)(o)},11607:function(e,n,t){t.r(n),t.d(n,{Loading:function(){return o}});var i=t(27573),r=t(10607),u=t(7653),a=t(45790);let o=(0,u.memo)(function(e){let{size:n="md",fullscreen:t=!1,inheritColor:o,delay:l=0}=e,[c,d]=(0,u.useState)(l>0);return(0,u.useEffect)(()=>{if(!l)return;let e=setTimeout(()=>d(!1),l);return()=>clearTimeout(e)},[l]),(0,i.jsx)("div",{className:(0,r.Z)(t?"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2":"m-auto"),children:(0,i.jsx)("div",{className:(0,r.Z)("sm"===n&&"h-4 w-4 border-2","md"===n&&"h-20 w-20 border-8",o?"border-current":"border-border-200","text-secondary inline-block animate-spin rounded-full border-solid border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]",c&&"hidden"),role:"status",children:(0,i.jsx)("span",{className:"sr-only",children:(0,i.jsx)(a.Z,{defaultMessage:"Loading...",id:"gjBiyjshwX"})})})})})}}]);